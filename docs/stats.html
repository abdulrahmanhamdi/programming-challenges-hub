<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistics | Coding Hub</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="assets/css/style.css">

    <style>
        .stat-box {
            text-align: center;
            padding: 25px;
            border-radius: 12px;
            background: white;
            box-shadow: 0px 4px 12px rgba(0,0,0,0.1);
            font-size: 20px;
        }
        .dark-mode .stat-box {
            background: #1e1e1e;
            border-color: #333;
            color: #eee;
        }
        .stat-value {
            font-size: 34px;
            font-weight: bold;
            margin-top: 10px;
        }
        /* Simple bar chart */
        .chart-bar {
            height: 18px;
            border-radius: 10px;
            background-color: #3b82f6;
            margin-bottom: 10px;
            animation: grow 1s ease-out forwards;
            width: 0;
        }
        @keyframes grow {
            to { width: var(--bar-width); }
        }
    </style>
</head>
<body class="bg-light">

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container-fluid">

        <a class="navbar-brand" href="index.html">Coding Hub</a>

        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNav">

            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="problems.html">Problems</a></li>
                <li class="nav-item"><a class="nav-link" href="solutions.html">Solutions</a></li>
                <li class="nav-item"><a class="nav-link" href="search.html">Search</a></li>
                <li class="nav-item"><a class="nav-link active" href="stats.html">Statistics</a></li>
                <li class="nav-item"><a class="nav-link" href="about.html">About</a></li>
            </ul>

            <input id="globalSearchInput" class="form-control me-2 w-25" placeholder="Search problems..." />
            <button class="btn btn-light" onclick="toggleTheme()">üåô / ‚òÄÔ∏è</button>

        </div>
    </div>
</nav>



<div class="container mt-4">

    <h2 class="text-center mb-4">üìä Project Statistics</h2>

    <div class="row g-4 mb-5">

        <div class="col-md-4">
            <div class="stat-box animate-slide-up">
                <p>Total Problems</p>
                <div id="statProblems" class="stat-value">...</div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="stat-box animate-slide-up">
                <p>Total Solutions</p>
                <div id="statSolutions" class="stat-value">...</div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="stat-box animate-slide-up">
                <p>Languages Supported</p>
                <div id="statLanguages" class="stat-value">4</div>
            </div>
        </div>

    </div>

    <h3 class="mb-3">GitHub Statistics</h3>

    <div class="row g-4">

        <div class="col-md-4">
            <div class="stat-box animate-fade">
                <p>‚≠ê Stars</p>
                <div id="statStars" class="stat-value">...</div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="stat-box animate-fade">
                <p>üç¥ Forks</p>
                <div id="statForks" class="stat-value">...</div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="stat-box animate-fade">
                <p>üë• Contributors</p>
                <div id="statContributors" class="stat-value">...</div>
            </div>
        </div>

    </div>


    <!-- CHART -->
    <div class="mt-5">
        <h3>Difficulty Chart</h3>

        <p>Easy</p>
        <div class="chart-bar" id="barEasy" style="--bar-width: 0%;"></div>

        <p>Medium</p>
        <div class="chart-bar" id="barMedium" style="--bar-width: 0%;"></div>

        <p>Hard</p>
        <div class="chart-bar" id="barHard" style="--bar-width: 0%;"></div>
    </div>


</div>




<script src="assets/js/site.js"></script>

<script>

let countEasy = 0;
let countMedium = 0;
let countHard = 0;
let totalSolutions = 0;


// LOAD AND COUNT PROBLEMS
fetch('../PROBLEMS_INDEX.md')
    .then(res => res.text())
    .then(text => {

        const lines = text.split("\n")
            .filter(line => line.startsWith("| ") && line.includes(".md"));

        document.getElementById("statProblems").innerText = lines.length;

        // Count difficulties
        lines.forEach(line => {
            const parts = line.split("|");
            const difficulty = parts[2].trim().toLowerCase();

            if (difficulty === "easy") countEasy++;
            if (difficulty === "medium") countMedium++;
            if (difficulty === "hard") countHard++;
        });

        // Update bars
        const total = countEasy + countMedium + countHard;

        document.getElementById("barEasy").style.setProperty("--bar-width", (countEasy/total*100) + "%");
        document.getElementById("barMedium").style.setProperty("--bar-width", (countMedium/total*100) + "%");
        document.getElementById("barHard").style.setProperty("--bar-width", (countHard/total*100) + "%");

    });


// COUNT SOLUTIONS
Promise.all([
    fetch("../solutions/python/").then(r => r.text()).catch(() => ""),
    fetch("../solutions/javascript/").then(r => r.text()).catch(() => ""),
    fetch("../solutions/java/").then(r => r.text()).catch(() => ""),
    fetch("../solutions/cpp/").then(r => r.text()).catch(() => "")
]).then(responses => {
    responses.forEach(html => {
        const matches = html.match(/href=\".*?\\.(py|js|java|cpp)\"/g);
        if (matches) totalSolutions += matches.length;
    });
    document.getElementById("statSolutions").innerText = totalSolutions;
});


// GITHUB API STATS
fetch("https://api.github.com/repos/USERNAME/REPO")
    .then(res => res.json())
    .then(repo => {
        document.getElementById("statStars").innerText = repo.stargazers_count;
        document.getElementById("statForks").innerText = repo.forks_count;
    });

fetch("https://api.github.com/repos/USERNAME/REPO/contributors")
    .then(res => res.json())
    .then(contrib => {
        document.getElementById("statContributors").innerText = contrib.length;
    });


// ENABLE SEARCH
setupSearch("globalSearchInput", "searchResults");

</script>

</body>
</html>
